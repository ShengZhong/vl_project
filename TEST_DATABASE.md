# æ•°æ®åº“ç®¡ç†åŠŸèƒ½æµ‹è¯•æŒ‡å—

> **åŠŸèƒ½ç‚¹ID**: VL-TOOL-001  
> **æµ‹è¯•ç‰ˆæœ¬**: v1.1  
> **æœ€åæ›´æ–°**: 2025-01-15

---

## âš¡ å¿«é€Ÿæµ‹è¯•ï¼ˆ5åˆ†é’Ÿï¼‰

### å‰ææ¡ä»¶

1. âœ… å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆ`npm start`ï¼‰
2. âœ… æµè§ˆå™¨å·²æ‰“å¼€ `http://localhost:8000`

---

### æµ‹è¯•æ­¥éª¤

#### æ­¥éª¤1: è®¿é—®æ•°æ®åº“ç®¡ç†é¡µé¢ï¼ˆ30ç§’ï¼‰

**æ“ä½œ**:
1. ç‚¹å‡»å·¦ä¾§èœå•"å·¥å…·ç±»"
2. ç‚¹å‡»"æ•°æ®åº“ç®¡ç†"

**é¢„æœŸç»“æœ**:
- âœ… é¡µé¢æ­£å¸¸æ‰“å¼€
- âœ… çœ‹åˆ°ä¸‰ä¸ªTabï¼šè¡¨ç»“æ„ã€è¡¨å…³ç³»ã€SQLæŸ¥è¯¢
- âœ… æ²¡æœ‰é”™è¯¯æç¤º

**å¦‚æœå¤±è´¥**: æ£€æŸ¥èœå•é…ç½®æ˜¯å¦æ­£ç¡®

---

#### æ­¥éª¤2: æµ‹è¯•è¡¨ç»“æ„åŠŸèƒ½ï¼ˆ1åˆ†é’Ÿï¼‰

**æ“ä½œ**:
1. ç¡®ä¿åœ¨"è¡¨ç»“æ„"Tabé¡µ
2. ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
3. ç­‰å¾…åŠ è½½å®Œæˆ

**é¢„æœŸç»“æœ**:
- âœ… æ˜¾ç¤ºæˆåŠŸæç¤ºï¼š"æˆåŠŸåŠ è½½ X ä¸ªè¡¨çš„ç»“æ„"
- âœ… çœ‹åˆ°è¡¨çš„åˆ—è¡¨ï¼ˆæŠ˜å çŠ¶æ€ï¼‰
- âœ… è¡¨æ ¼åŒ…å«ï¼švlusers, customers, metaadguidance_accounts ç­‰

**è¿›ä¸€æ­¥æµ‹è¯•**:
- ç‚¹å‡»æŸä¸ªè¡¨åï¼ˆå¦‚ vlusersï¼‰å±•å¼€
- åº”è¯¥çœ‹åˆ°å­—æ®µåˆ—è¡¨ï¼šid, vlid, email, statusç­‰
- å­—æ®µä¿¡æ¯åŒ…å«ï¼šå­—æ®µåã€ç±»å‹ã€æ˜¯å¦å¿…å¡«ã€é»˜è®¤å€¼

**å¦‚æœå¤±è´¥**:
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æ‰§è¡Œä»¥ä¸‹ä»£ç æ£€æŸ¥
import('@/db').then(db => {
  db.getAllTableNames().then(tables => {
    console.log('è¡¨ååˆ—è¡¨:', tables);
  }).catch(err => {
    console.error('è·å–è¡¨åå¤±è´¥:', err);
  });
});
```

---

#### æ­¥éª¤3: æµ‹è¯•è¡¨å…³ç³»åŠŸèƒ½ï¼ˆ1åˆ†é’Ÿï¼‰

**æ“ä½œ**:
1. ç‚¹å‡»"è¡¨å…³ç³»"Tabé¡µ
2. ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
3. ç­‰å¾…åŠ è½½å®Œæˆ

**é¢„æœŸç»“æœ**:
- âœ… æ˜¾ç¤ºæˆåŠŸæç¤ºï¼š"æˆåŠŸåŠ è½½ X æ¡è¡¨å…³ç³»"
- âœ… çœ‹åˆ°å¤–é”®å…³ç³»è¡¨æ ¼
- âœ… è¡¨æ ¼å†…å®¹åŒ…å«ï¼šå­è¡¨ã€å­è¡¨å­—æ®µã€çˆ¶è¡¨ã€çˆ¶è¡¨å­—æ®µã€åˆ é™¤è§„åˆ™

**ç¤ºä¾‹æ•°æ®**:
| å­è¡¨ | å­è¡¨å­—æ®µ | çˆ¶è¡¨ | çˆ¶è¡¨å­—æ®µ | åˆ é™¤è§„åˆ™ |
|------|---------|------|---------|---------|
| customers | settlementEntityId | settlement_entities | id | SET NULL |
| metaadguidance_accounts | customerId | customers | id | SET NULL |

**å¦‚æœå¤±è´¥**:
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ
import('@/db').then(db => {
  db.getAllTableRelationships().then(relations => {
    console.log('è¡¨å…³ç³»åˆ—è¡¨:', relations);
  }).catch(err => {
    console.error('è·å–è¡¨å…³ç³»å¤±è´¥:', err);
  });
});
```

---

#### æ­¥éª¤4: æµ‹è¯•SQLæŸ¥è¯¢åŠŸèƒ½ï¼ˆ2åˆ†é’Ÿï¼‰

**æµ‹è¯•4.1: ç®€å•æŸ¥è¯¢**

**æ“ä½œ**:
1. ç‚¹å‡»"SQLæŸ¥è¯¢"Tabé¡µ
2. åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥:
```sql
SELECT * FROM sqlite_master WHERE type='table';
```
3. ç‚¹å‡»"æ‰§è¡Œ"æŒ‰é’®

**é¢„æœŸç»“æœ**:
- âœ… æ˜¾ç¤ºæˆåŠŸæç¤ºï¼š"æŸ¥è¯¢æˆåŠŸï¼Œè¿”å› X è¡Œï¼Œè€—æ—¶ XXms"
- âœ… çœ‹åˆ°æŸ¥è¯¢ç»“æœè¡¨æ ¼
- âœ… è¡¨æ ¼æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“è¡¨çš„ä¿¡æ¯

---

**æµ‹è¯•4.2: ç»Ÿè®¡æŸ¥è¯¢**

**SQL**:
```sql
SELECT 
  type,
  COUNT(*) as count 
FROM sqlite_master 
GROUP BY type;
```

**é¢„æœŸç»“æœ**:
- âœ… è¿”å›æ•°æ®åº“å¯¹è±¡ç±»å‹ç»Ÿè®¡
- âœ… åº”è¯¥è‡³å°‘æœ‰ 'table' å’Œ 'index' ä¸¤ç§ç±»å‹

---

**æµ‹è¯•4.3: è”è¡¨æŸ¥è¯¢**

**SQL**:
```sql
SELECT 
  c.customerName,
  COUNT(a.id) as account_count
FROM customers c
LEFT JOIN metaadguidance_accounts a ON a.customerId = c.id
GROUP BY c.id, c.customerName
LIMIT 5;
```

**é¢„æœŸç»“æœ**:
- âœ… è¿”å›å®¢æˆ·åŠå…¶è´¦æˆ·æ•°é‡
- âœ… å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œè¿”å›0è¡Œï¼ˆè¿™æ˜¯æ­£å¸¸çš„ï¼‰

---

**æµ‹è¯•4.4: ä¿®æ”¹æ“ä½œï¼ˆäºŒæ¬¡ç¡®è®¤ï¼‰**

**SQL**:
```sql
UPDATE vlusers SET status = 'test' WHERE vlid = 'VL999';
```

**é¢„æœŸç»“æœ**:
- âœ… å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
- âœ… å¯¹è¯æ¡†æ˜¾ç¤ºå³å°†æ‰§è¡Œçš„SQL
- âœ… ç‚¹å‡»"å–æ¶ˆ"ä¸æ‰§è¡Œ
- âœ… ç‚¹å‡»"ç¡®è®¤æ‰§è¡Œ"åæ‰§è¡Œ

---

**æµ‹è¯•4.5: ç¦æ­¢çš„DDLæ“ä½œ**

**SQL**:
```sql
DROP TABLE vlusers;
```

**é¢„æœŸç»“æœ**:
- âœ… æ˜¾ç¤ºé”™è¯¯æç¤ºï¼š"ç¦æ­¢æ‰§è¡Œ DROP æ“ä½œï¼Œè¯·é€šè¿‡ä»£ç ä¿®æ”¹æ•°æ®åº“ç»“æ„"
- âœ… SQLä¸ä¼šè¢«æ‰§è¡Œ

---

#### æ­¥éª¤5: æµ‹è¯•CSVå¯¼å‡ºï¼ˆ1åˆ†é’Ÿï¼‰

**æ“ä½œ**:
1. åœ¨SQLæŸ¥è¯¢Tabé¡µæ‰§è¡Œ:
```sql
SELECT * FROM vlusers LIMIT 10;
```
2. ç­‰å¾…æŸ¥è¯¢å®Œæˆ
3. ç‚¹å‡»"å¯¼å‡ºCSV"æŒ‰é’®

**é¢„æœŸç»“æœ**:
- âœ… æµè§ˆå™¨ä¸‹è½½CSVæ–‡ä»¶
- âœ… æ–‡ä»¶åæ ¼å¼ï¼š`query_result_[æ—¶é—´æˆ³].csv`
- âœ… æ‰“å¼€CSVæ–‡ä»¶ï¼ŒåŒ…å«åˆ—æ ‡é¢˜å’Œæ•°æ®

---

## ğŸ” è¯¦ç»†æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•ç”¨ä¾‹1: ç©ºæ•°æ®åº“æµ‹è¯•

**ç›®çš„**: éªŒè¯ç©ºæ•°æ®åº“çš„å¤„ç†

**å‰ç½®æ¡ä»¶**:
```javascript
// æ¸…ç©ºæ•°æ®åº“
localStorage.removeItem('vl_project_db');
location.reload();
```

**æµ‹è¯•æ­¥éª¤**:
1. è®¿é—®æ•°æ®åº“ç®¡ç†é¡µé¢
2. ç‚¹å‡»"è¡¨ç»“æ„"åˆ·æ–°

**é¢„æœŸç»“æœ**:
- âœ… æˆåŠŸåŠ è½½è¡¨ç»“æ„ï¼ˆè¡¨æ˜¯ç©ºçš„ï¼Œä½†è¡¨ç»“æ„å­˜åœ¨ï¼‰
- âœ… ä¸åº”è¯¥æœ‰é”™è¯¯æç¤º

---

### æµ‹è¯•ç”¨ä¾‹2: æœ‰æ•°æ®åº“æµ‹è¯•

**ç›®çš„**: éªŒè¯æœ‰æ•°æ®æ—¶çš„æ­£å¸¸åŠŸèƒ½

**å‰ç½®æ¡ä»¶**:
1. è®¿é—® `/vluser/list` åˆå§‹åŒ–VLç”¨æˆ·æ•°æ®
2. è®¿é—® `/metaadguidance/list` åˆå§‹åŒ–Metaå¹¿å‘Šæ•°æ®

**æµ‹è¯•æ­¥éª¤**:
1. è¿”å›æ•°æ®åº“ç®¡ç†é¡µé¢
2. æ‰§è¡ŒæŸ¥è¯¢ï¼š
```sql
SELECT COUNT(*) FROM vlusers;
```

**é¢„æœŸç»“æœ**:
- âœ… è¿”å›ç”¨æˆ·æ•°é‡ > 0

---

### æµ‹è¯•ç”¨ä¾‹3: å¹¶å‘æ“ä½œæµ‹è¯•

**ç›®çš„**: éªŒè¯å¤šä¸ªæ“ä½œåŒæ—¶è¿›è¡Œ

**æµ‹è¯•æ­¥éª¤**:
1. ç‚¹å‡»"è¡¨ç»“æ„"åˆ·æ–°
2. ç«‹å³åˆ‡æ¢åˆ°"è¡¨å…³ç³»"Tab
3. ç‚¹å‡»"è¡¨å…³ç³»"åˆ·æ–°
4. ç«‹å³åˆ‡æ¢åˆ°"SQLæŸ¥è¯¢"Tab
5. æ‰§è¡ŒSQLæŸ¥è¯¢

**é¢„æœŸç»“æœ**:
- âœ… æ‰€æœ‰æ“ä½œéƒ½èƒ½æ­£å¸¸å®Œæˆ
- âœ… æ²¡æœ‰ç›¸äº’å¹²æ‰°
- âœ… æ²¡æœ‰é”™è¯¯æç¤º

---

### æµ‹è¯•ç”¨ä¾‹4: é”™è¯¯å¤„ç†æµ‹è¯•

**æµ‹è¯•4.1: SQLè¯­æ³•é”™è¯¯**

**SQL**:
```sql
SELCT * FROM vlusers;
```
ï¼ˆæ³¨æ„ï¼šSELCT æ‹¼å†™é”™è¯¯ï¼‰

**é¢„æœŸç»“æœ**:
- âœ… æ˜¾ç¤ºé”™è¯¯æç¤ºï¼š"SQLæ‰§è¡Œå¤±è´¥: near "SELCT": syntax error"

---

**æµ‹è¯•4.2: è¡¨ä¸å­˜åœ¨**

**SQL**:
```sql
SELECT * FROM non_existent_table;
```

**é¢„æœŸç»“æœ**:
- âœ… æ˜¾ç¤ºé”™è¯¯æç¤ºï¼š"SQLæ‰§è¡Œå¤±è´¥: no such table: non_existent_table"

---

**æµ‹è¯•4.3: å­—æ®µä¸å­˜åœ¨**

**SQL**:
```sql
SELECT non_existent_field FROM vlusers;
```

**é¢„æœŸç»“æœ**:
- âœ… æ˜¾ç¤ºé”™è¯¯æç¤ºï¼š"SQLæ‰§è¡Œå¤±è´¥: no such column: non_existent_field"

---

## ğŸ› ï¸ è°ƒè¯•æµ‹è¯•

### åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰‹åŠ¨æµ‹è¯•

**æ‰“å¼€æ§åˆ¶å°**: æŒ‰ `F12`

#### æµ‹è¯•1: å¯¼å…¥æ•°æ®åº“æ¨¡å—

```javascript
// æµ‹è¯•å¯¼å…¥
import('@/db').then(db => {
  console.log('æ•°æ®åº“æ¨¡å—å¯¼å…¥æˆåŠŸ');
  console.log('å¯ç”¨å‡½æ•°:', Object.keys(db));
}).catch(err => {
  console.error('å¯¼å…¥å¤±è´¥:', err);
});
```

**é¢„æœŸç»“æœ**:
```
æ•°æ®åº“æ¨¡å—å¯¼å…¥æˆåŠŸ
å¯ç”¨å‡½æ•°: [getAllTableNames, getTableStructure, getAllTableRelationships, executeSQLQuery, ...]
```

---

#### æµ‹è¯•2: è·å–è¡¨å

```javascript
import('@/db').then(async (db) => {
  try {
    const tables = await db.getAllTableNames();
    console.log('æ‰€æœ‰è¡¨:', tables);
    console.log('è¡¨æ•°é‡:', tables.length);
  } catch (err) {
    console.error('è·å–è¡¨åå¤±è´¥:', err);
  }
});
```

**é¢„æœŸç»“æœ**:
```
æ‰€æœ‰è¡¨: ["vlusers", "customers", "settlement_entities", ...]
è¡¨æ•°é‡: 15
```

---

#### æµ‹è¯•3: è·å–è¡¨ç»“æ„

```javascript
import('@/db').then(async (db) => {
  try {
    const columns = await db.getTableStructure('vlusers');
    console.log('vlusersè¡¨ç»“æ„:', columns);
    console.table(columns);
  } catch (err) {
    console.error('è·å–è¡¨ç»“æ„å¤±è´¥:', err);
  }
});
```

**é¢„æœŸç»“æœ**:
```
vlusersè¡¨ç»“æ„: [{cid: 0, name: "id", type: "INTEGER", ...}, ...]
```

---

#### æµ‹è¯•4: æ‰§è¡ŒSQL

```javascript
import('@/db').then(async (db) => {
  try {
    const result = await db.executeSQLQuery('SELECT COUNT(*) as count FROM vlusers');
    console.log('æŸ¥è¯¢ç»“æœ:', result);
    console.log('è¿”å›è¡Œæ•°:', result.rowCount);
    console.log('æ•°æ®:', result.values);
  } catch (err) {
    console.error('SQLæ‰§è¡Œå¤±è´¥:', err);
  }
});
```

**é¢„æœŸç»“æœ**:
```
æŸ¥è¯¢ç»“æœ: {columns: ["count"], values: [[10]], rowCount: 1, ...}
è¿”å›è¡Œæ•°: 1
æ•°æ®: [[10]]
```

---

## ğŸ“Š æ€§èƒ½æµ‹è¯•

### æµ‹è¯•1: åŠ è½½é€Ÿåº¦

**æµ‹è¯•æ–¹æ³•**:
1. æ‰“å¼€æµè§ˆå™¨Networké¢æ¿
2. åˆ·æ–°"è¡¨ç»“æ„"Tabé¡µ
3. è®°å½•åŠ è½½æ—¶é—´

**é¢„æœŸç»“æœ**:
- âœ… åŠ è½½æ—¶é—´ < 2ç§’
- âœ… æ²¡æœ‰ç½‘ç»œè¯·æ±‚ï¼ˆç›´æ¥è°ƒç”¨æœ¬åœ°å‡½æ•°ï¼‰

---

### æµ‹è¯•2: æŸ¥è¯¢é€Ÿåº¦

**æµ‹è¯•æ–¹æ³•**:
æ‰§è¡Œä»¥ä¸‹SQLå¹¶è®°å½•æ‰§è¡Œæ—¶é—´:
```sql
SELECT * FROM vlusers LIMIT 100;
```

**é¢„æœŸç»“æœ**:
- âœ… æ‰§è¡Œæ—¶é—´ < 100ms
- âœ… é¡µé¢æ˜¾ç¤ºæ‰§è¡Œæ—¶é—´

---

## âœ… æµ‹è¯•é€šè¿‡æ ‡å‡†

### åŸºç¡€åŠŸèƒ½

- [ ] èœå•ä¸­èƒ½çœ‹åˆ°"æ•°æ®åº“ç®¡ç†"
- [ ] ç‚¹å‡»èœå•èƒ½æ­£å¸¸æ‰“å¼€é¡µé¢
- [ ] ä¸‰ä¸ªTabé¡µéƒ½èƒ½æ­£å¸¸åˆ‡æ¢
- [ ] è¡¨ç»“æ„åˆ·æ–°æˆåŠŸ
- [ ] è¡¨å…³ç³»åˆ·æ–°æˆåŠŸ
- [ ] SQLæŸ¥è¯¢æ‰§è¡ŒæˆåŠŸ

### é«˜çº§åŠŸèƒ½

- [ ] è”è¡¨æŸ¥è¯¢æ­£å¸¸å·¥ä½œ
- [ ] ä¿®æ”¹æ“ä½œæœ‰äºŒæ¬¡ç¡®è®¤
- [ ] DDLæ“ä½œè¢«ç¦æ­¢
- [ ] CSVå¯¼å‡ºæ­£å¸¸å·¥ä½œ
- [ ] é”™è¯¯æç¤ºæ¸…æ™°å‹å¥½

### æ€§èƒ½è¦æ±‚

- [ ] è¡¨ç»“æ„åŠ è½½ < 2ç§’
- [ ] è¡¨å…³ç³»åŠ è½½ < 1ç§’
- [ ] ç®€å•SQLæŸ¥è¯¢ < 100ms
- [ ] å¤æ‚SQLæŸ¥è¯¢ < 1ç§’

---

## ğŸ› å¦‚æœæµ‹è¯•å¤±è´¥

### 1. æ£€æŸ¥å¼€å‘æœåŠ¡å™¨

```bash
# ç¡®è®¤æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
# æŸ¥çœ‹ç»ˆç«¯æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
```

### 2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°

```javascript
// æŒ‰F12æ‰“å¼€æ§åˆ¶å°
// æŸ¥çœ‹æ˜¯å¦æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯
```

### 3. æ¸…é™¤ç¼“å­˜é‡è¯•

```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
localStorage.clear();
sessionStorage.clear();
location.reload();
```

### 4. å®Œå…¨é‡æ–°å¼€å§‹

```bash
# åœæ­¢æœåŠ¡å™¨
Ctrl+C

# æ¸…é™¤ç¼“å­˜
rm -rf node_modules/.cache

# é‡å¯
npm start
```

---

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

### æµ‹è¯•ä¿¡æ¯

- **æµ‹è¯•äººå‘˜**: ___________
- **æµ‹è¯•æ—¶é—´**: ___________
- **æµè§ˆå™¨**: Chrome / Firefox / Safari / Edge
- **æµè§ˆå™¨ç‰ˆæœ¬**: ___________

### æµ‹è¯•ç»“æœ

| æµ‹è¯•é¡¹ | ç»“æœ | å¤‡æ³¨ |
|-------|------|------|
| èœå•æ˜¾ç¤º | âœ… / âŒ | |
| è¡¨ç»“æ„åŠ è½½ | âœ… / âŒ | |
| è¡¨å…³ç³»åŠ è½½ | âœ… / âŒ | |
| SQLæŸ¥è¯¢ | âœ… / âŒ | |
| CSVå¯¼å‡º | âœ… / âŒ | |
| äºŒæ¬¡ç¡®è®¤ | âœ… / âŒ | |
| DDLç¦æ­¢ | âœ… / âŒ | |

### å‘ç°çš„é—®é¢˜

1. ___________
2. ___________
3. ___________

### æ€»ä½“è¯„ä»·

- [ ] é€šè¿‡
- [ ] éƒ¨åˆ†é€šè¿‡ï¼ˆæœ‰å°é—®é¢˜ï¼‰
- [ ] ä¸é€šè¿‡ï¼ˆæœ‰ä¸¥é‡é—®é¢˜ï¼‰

---

**æµ‹è¯•æ–‡æ¡£**: âœ… å®Œæˆ  
**åŠŸèƒ½ç‚¹ID**: VL-TOOL-001  
**æœ€åæ›´æ–°**: 2025-01-15

