# æ•°æ®åº“ç®¡ç†åŠŸèƒ½ - ç´§æ€¥ä¿®å¤æŒ‡å—

> **åŠŸèƒ½ç‚¹ID**: VL-TOOL-001  
> **ç´§æ€¥ç¨‹åº¦**: ğŸ”´ é«˜  
> **é¢„è®¡ä¿®å¤æ—¶é—´**: 5åˆ†é’Ÿ

---

## ğŸš¨ é—®é¢˜ç—‡çŠ¶

ç”¨æˆ·æŠ¥å‘Šï¼š"æ— æ³•è®¿é—®"æ•°æ®åº“ç®¡ç†é¡µé¢

---

## ğŸ” å¿«é€Ÿè¯Šæ–­æ­¥éª¤

### æ­¥éª¤1: æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œï¼ˆ30ç§’ï¼‰

```bash
# æŸ¥çœ‹ç»ˆç«¯æ˜¯å¦æ˜¾ç¤ºï¼š
# âœ“ Webpack compiled successfully
# âœ“ ready on http://localhost:8000
```

**å¦‚æœæœåŠ¡å™¨æœªè¿è¡Œ**:
```bash
# å¯åŠ¨æœåŠ¡å™¨
cd /Users/zhongsheng/Documents/work/vl_project
npm start
```

---

### æ­¥éª¤2: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ï¼ˆ1åˆ†é’Ÿï¼‰

1. è®¿é—®: `http://localhost:8000/tools/database`
2. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
3. æŸ¥çœ‹ **Console** æ ‡ç­¾

**å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ**:

#### é”™è¯¯1: "Cannot read property 'xxx' of undefined"

**åŸå› **: æ•°æ®åº“æœªåˆå§‹åŒ–

**è§£å†³**:
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ
localStorage.removeItem('vl_project_db');
location.reload();
```

---

#### é”™è¯¯2: "Module not found: Error: Can't resolve '@/db'"

**åŸå› **: å¯¼å…¥è·¯å¾„é—®é¢˜

**è§£å†³**: æ£€æŸ¥ tsconfig.json æ˜¯å¦é…ç½®äº†è·¯å¾„åˆ«å

```json
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

---

#### é”™è¯¯3: "getAllTableNames is not a function"

**åŸå› **: å‡½æ•°æœªæ­£ç¡®å¯¼å‡º

**è§£å†³**: ç¡®è®¤ `src/db/index.ts` ä¸­æœ‰ä»¥ä¸‹å¯¼å‡º:
```typescript
export const getAllTableNames = async (): Promise<string[]> => { ... }
export const getTableStructure = async (tableName: string): Promise<any[]> => { ... }
export const getAllTableRelationships = async (): Promise<any[]> => { ... }
export const executeSQLQuery = async (sql: string): Promise<any> => { ... }
```

---

### æ­¥éª¤3: æ£€æŸ¥ Network é¢æ¿ï¼ˆ1åˆ†é’Ÿï¼‰

1. æ‰“å¼€ **Network** æ ‡ç­¾
2. åˆ·æ–°é¡µé¢
3. æŸ¥çœ‹æ˜¯å¦æœ‰404æˆ–500é”™è¯¯

**å¦‚æœæœ‰404é”™è¯¯**: æ£€æŸ¥è·¯ç”±é…ç½®
**å¦‚æœæœ‰500é”™è¯¯**: æŸ¥çœ‹Mockæ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯

---

## ğŸ”§ ç»ˆæä¿®å¤æ–¹æ¡ˆï¼ˆ3åˆ†é’Ÿï¼‰

### æ–¹æ¡ˆ1: å®Œå…¨é‡å¯ï¼ˆæ¨èï¼‰

```bash
# 1. åœæ­¢æœåŠ¡å™¨
æŒ‰ Ctrl+C

# 2. æ¸…é™¤ç¼“å­˜
rm -rf node_modules/.cache
rm -rf .umi

# 3. é‡å¯æœåŠ¡å™¨
npm start

# 4. ç­‰å¾…ç¼–è¯‘å®Œæˆï¼ˆçº¦1-2åˆ†é’Ÿï¼‰
# çœ‹åˆ° "âœ“ Webpack compiled successfully"

# 5. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
# åœ¨æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æ‰§è¡Œï¼š
localStorage.clear();
sessionStorage.clear();
location.reload();

# 6. é‡æ–°è®¿é—®
http://localhost:8000/tools/database
```

---

### æ–¹æ¡ˆ2: ä¸´æ—¶ç»•è¿‡é—®é¢˜

å¦‚æœé¡µé¢å®Œå…¨æ— æ³•è®¿é—®ï¼Œä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°ç›´æ¥æ“ä½œæ•°æ®åº“ï¼š

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æ‰§è¡Œ

// 1. å¯¼å…¥æ•°æ®åº“æ¨¡å—
const dbPromise = import('/src/db/index.ts');

// 2. è·å–æ‰€æœ‰è¡¨å
dbPromise.then(db => {
  db.getAllTableNames().then(tables => {
    console.log('æ‰€æœ‰è¡¨:', tables);
  });
});

// 3. æŸ¥çœ‹è¡¨ç»“æ„
dbPromise.then(db => {
  db.getTableStructure('vlusers').then(columns => {
    console.table(columns);
  });
});

// 4. æ‰§è¡ŒSQL
dbPromise.then(db => {
  db.executeSQLQuery('SELECT * FROM vlusers LIMIT 5').then(result => {
    console.log('æŸ¥è¯¢ç»“æœ:', result);
  });
});
```

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: é¡µé¢ç™½å±

**ç—‡çŠ¶**: è®¿é—®é¡µé¢åå®Œå…¨æ˜¯ç™½å±ï¼Œæ²¡æœ‰ä»»ä½•å†…å®¹

**åŸå› **: 
- JavaScriptç¼–è¯‘é”™è¯¯
- Reactç»„ä»¶æ¸²æŸ“é”™è¯¯

**è§£å†³**:
1. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„çº¢è‰²é”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹ç»ˆç«¯çš„ç¼–è¯‘é”™è¯¯
3. ä¿®å¤é”™è¯¯åï¼Œé¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°

---

### é—®é¢˜2: 404 Not Found

**ç—‡çŠ¶**: è®¿é—® `/tools/database` æ˜¾ç¤º404

**åŸå› **: è·¯ç”±æœªé…ç½®

**è§£å†³**: æ£€æŸ¥ `.umirc.ts` ä¸­æ˜¯å¦æœ‰ä»¥ä¸‹è·¯ç”±:
```typescript
{
  path: '/tools/database',
  component: '@/pages/tools/database/index',
}
```

---

### é—®é¢˜3: ç»„ä»¶åŠ è½½å¤±è´¥

**ç—‡çŠ¶**: é¡µé¢éƒ¨åˆ†å†…å®¹ç¼ºå¤±

**åŸå› **: ç»„ä»¶æ–‡ä»¶ä¸å­˜åœ¨æˆ–è·¯å¾„é”™è¯¯

**è§£å†³**: ç¡®è®¤ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨:
- `src/pages/tools/database/index.tsx`
- `src/pages/tools/database/components/TableSchema.tsx`
- `src/pages/tools/database/components/TableRelations.tsx`
- `src/pages/tools/database/components/SQLQuery.tsx`

---

### é—®é¢˜4: æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥

**ç—‡çŠ¶**: æç¤º"æ•°æ®åº“æœªåˆå§‹åŒ–"

**åŸå› **: sql.jsåŠ è½½å¤±è´¥æˆ–localStorageä¸å¯ç”¨

**è§£å†³**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆsql.jséœ€è¦ä»CDNåŠ è½½wasmæ–‡ä»¶ï¼‰
2. æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦ç¦ç”¨äº†localStorage
3. å°è¯•ä½¿ç”¨æ— ç—•æ¨¡å¼æ‰“å¼€æµè§ˆå™¨

---

## ğŸ“‹ å®Œæ•´æ£€æŸ¥æ¸…å•

åœ¨æŠ¥å‘Šé—®é¢˜å‰ï¼Œè¯·å®Œæˆä»¥ä¸‹æ£€æŸ¥ï¼š

- [ ] å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆ`npm start`ï¼‰
- [ ] æµè§ˆå™¨è®¿é—® `http://localhost:8000` å¯ä»¥çœ‹åˆ°é¦–é¡µ
- [ ] å·¦ä¾§èœå•"å·¥å…·ç±»"ä¸­èƒ½çœ‹åˆ°"æ•°æ®åº“ç®¡ç†"é€‰é¡¹
- [ ] ç‚¹å‡»"æ•°æ®åº“ç®¡ç†"åï¼ŒURLå˜ä¸º `/tools/database`
- [ ] æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æ²¡æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯
- [ ] å·²å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°
- [ ] å·²å°è¯•é‡å¯å¼€å‘æœåŠ¡å™¨

---

## ğŸ†˜ ä»æ— æ³•è§£å†³ï¼Ÿ

### æ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **æµè§ˆå™¨æ§åˆ¶å°æˆªå›¾**
   - æŒ‰F12ï¼Œåˆ‡æ¢åˆ°Consoleæ ‡ç­¾
   - æˆªå›¾æ‰€æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯

2. **ç»ˆç«¯è¾“å‡º**
   - å¤åˆ¶ç»ˆç«¯ä¸­çš„é”™è¯¯ä¿¡æ¯

3. **è®¿é—®URL**
   - è®°å½•æ‚¨è®¿é—®çš„å®Œæ•´URL

4. **æ“ä½œæ­¥éª¤**
   - è¯¦ç»†æè¿°æ‚¨çš„æ“ä½œæ­¥éª¤

5. **æµè§ˆå™¨ä¿¡æ¯**
   - æµè§ˆå™¨ç±»å‹å’Œç‰ˆæœ¬

---

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚æœå®åœ¨æ— æ³•ä¿®å¤ï¼Œå¯ä»¥ä¸´æ—¶å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼š

```bash
# æŸ¥çœ‹æäº¤å†å²
git log --oneline | head -10

# å›æ»šåˆ°ä¿®å¤å‰çš„ç‰ˆæœ¬
git checkout 7a4a396

# é‡å¯æœåŠ¡å™¨
npm start
```

**æ³¨æ„**: å›æ»šåå°†å¤±å»æœ€æ–°çš„ä¿®å¤ï¼Œä¸æ¨èä½¿ç”¨æ­¤æ–¹æ¡ˆã€‚

---

## ğŸ’¡ è°ƒè¯•æŠ€å·§

### æŠ€å·§1: ä½¿ç”¨React DevTools

1. å®‰è£…React DevToolsæµè§ˆå™¨æ’ä»¶
2. æ‰“å¼€æ’ä»¶æŸ¥çœ‹ç»„ä»¶æ ‘
3. æ£€æŸ¥å“ªä¸ªç»„ä»¶æ¸²æŸ“å¤±è´¥

### æŠ€å·§2: æ·»åŠ console.logè°ƒè¯•

åœ¨ `src/pages/tools/database/index.tsx` ä¸­æ·»åŠ ï¼š

```typescript
useEffect(() => {
  console.log('DatabaseManagement ç»„ä»¶å·²æŒ‚è½½');
  loadTables();
  loadRelationships();
}, []);

const loadTables = async () => {
  console.log('å¼€å§‹åŠ è½½è¡¨ç»“æ„...');
  // ... å…¶ä»–ä»£ç 
};
```

### æŠ€å·§3: ç®€åŒ–ç»„ä»¶æµ‹è¯•

åˆ›å»ºæœ€ç®€å•çš„æµ‹è¯•ç»„ä»¶ï¼š

```typescript
// src/pages/tools/database/test.tsx
import React from 'react';

const Test: React.FC = () => {
  return <div>æµ‹è¯•é¡µé¢</div>;
};

export default Test;
```

åœ¨ `.umirc.ts` ä¸­æ·»åŠ è·¯ç”±ï¼š
```typescript
{ path: '/tools/database/test', component: '@/pages/tools/database/test' }
```

è®¿é—® `http://localhost:8000/tools/database/test`ï¼Œå¦‚æœèƒ½çœ‹åˆ°"æµ‹è¯•é¡µé¢"ï¼Œè¯´æ˜è·¯ç”±é…ç½®æ­£å¸¸ã€‚

---

## ğŸ“ ç´§æ€¥è”ç³»

å¦‚æœä»¥ä¸Šæ‰€æœ‰æ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·ï¼š

1. æä¾›å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
2. æä¾›æµè§ˆå™¨æ§åˆ¶å°æˆªå›¾
3. æä¾›ç»ˆç«¯è¾“å‡ºæˆªå›¾
4. è¯´æ˜å…·ä½“çš„é”™è¯¯ç°è±¡

---

**ç´§æ€¥ä¿®å¤æŒ‡å—**: âœ… å®Œæˆ  
**åŠŸèƒ½ç‚¹ID**: VL-TOOL-001  
**æœ€åæ›´æ–°**: 2025-01-15

---

## ğŸ¯ æœ€å¯èƒ½çš„åŸå› 

æ ¹æ®ç»éªŒï¼Œ"æ— æ³•è®¿é—®"æœ€å¸¸è§çš„åŸå› æ˜¯ï¼š

1. **æœåŠ¡å™¨æœªé‡å¯**ï¼ˆ70%ï¼‰â†’ é‡å¯æœåŠ¡å™¨
2. **æµè§ˆå™¨ç¼“å­˜**ï¼ˆ20%ï¼‰â†’ æ¸…é™¤ç¼“å­˜
3. **ä»£ç ç¼–è¯‘é”™è¯¯**ï¼ˆ5%ï¼‰â†’ æŸ¥çœ‹ç»ˆç«¯é”™è¯¯
4. **å…¶ä»–é—®é¢˜**ï¼ˆ5%ï¼‰â†’ æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯

**å»ºè®®å…ˆå°è¯•æ–¹æ¡ˆ1çš„å®Œå…¨é‡å¯æµç¨‹ï¼**

